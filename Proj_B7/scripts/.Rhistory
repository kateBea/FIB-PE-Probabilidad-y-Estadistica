ls
# -------------------------------
# 1. Carregar biblioteques
# -------------------------------
library(ggplot2)
# -------------------------------
# 0. Instal·lació automàtica de paquets necessaris
# -------------------------------
install_if_missing <- function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
message(sprintf("Instal·lant el paquet '%s'...", pkg))
install.packages(pkg, dependencies = TRUE)
}
}
# Comprovar i carregar
for (p in c("ggplot2", "dplyr")) install_if_missing(p)
# -------------------------------
# 6. Comparació BFS vs DFS
# -------------------------------
ggplot(data) +
geom_point(aes(x = Density, y = BFS.Time.ms.), color = "blue") +
geom_point(aes(x = Density, y = DFS.Time.ms.), color = "red") +
labs(
title = "Comparació de temps BFS vs DFS segons la densitat",
x = "Densitat del graf",
y = "Temps d'execució (ms)"
) +
theme_minimal()
# -------------------------------
# 8. Relació entre mida i eficiència
# -------------------------------
ggplot(data, aes(x = Nodes, y = Diff)) +
geom_point(color = "purple") +
geom_smooth(method = "lm", se = FALSE, color = "black") +
labs(
title = "Relació entre nombre de nodes i diferència de temps (DFS - BFS)",
x = "Nombre de nodes",
y = "Diferència (ms)"
) +
theme_minimal()
data <- read.csv("test_report.csv")
gc()
data <- read.csv("test_report.csv")
data <- read.csv("test_report.csv")
data <- read.csv("./test_report.csv")
# ------------------------------------------------------------
# A. Llegir i preparar les dades
# ------------------------------------------------------------
cat("Llegint les dades del fitxer test_report.csv...\n")
data <- read.csv("test_report.csv")
setwd("~/Documents/Grado IE/Q3/FIB-PE-Probabilidad-y-Estadistica/Proj_B7/scripts")
data <- read.csv("test_report.csv")
View(data)
cat("Dades carregades correctament!\n\n")
cat("Mostra de les primeres files:\n")
print(head(data))
data$Diff <- data$DFS.Time.ms. - data$BFS.Time.ms.
cat("\n=== Estadístiques descriptives ===\n")
summary(data[, c("Nodes", "Edges", "Density", "BFS.Time.ms.", "DFS.Time.ms.", "Diff")])
cat("\n=== Comprovació de la densitat ===\n")
data$Density_check <- data$Edges / (data$Nodes * (data$Nodes - 1))
cor_density <- cor(data$Density, data$Density_check)
cat(sprintf("Correlació entre densitat calculada i teòrica: %.4f\n", cor_density))
cat("Comprovant fitxer test_report.csv al directori de treball...\n")
cat("Directori actual: ", getwd(), "\n")
files <- list.files()
cat("Fitxers al directori:\n")
print(files)
cat("Comprovant fitxer test_report.csv al directori de treball...\n")
cat("Directori actual: ", getwd(), "\n")
files <- list.files()
cat("Fitxers al directori:\n")
print(files)
if (!file.exists("test_report.csv")) {
stop("ERROR: no s'ha trobat 'test_report.csv' al directori de treball. Copia el CSV al directori que mostra 'getwd()' o canvia el working directory.")
}
data <- read.csv("test_report.csv", stringsAsFactors = FALSE)
cat("Fitxer carregat. Nombre de registres:", nrow(data), "\n\n")
View(data)
cat("Columnes detectades:\n")
print(colnames(data))
cat("\nMostra de les primeres files:\n")
print(head(data, n = 6))
# Creacio de la columna Diff amb els noms de columnes reals
data$Diff <- data[["DFS Time (ms)"]] - data[["BFS Time (ms)"]]
cat("\n=== Estadistiques descriptives ===\n")
print(summary(data[c("Nodes", "Edges", "Density", "BFS Time (ms)", "DFS Time (ms)", "Diff")]))
# Creacio de la columna Diff amb els noms de columnes reals
data$Diff <- data[["DFS.Time..ms."]] - data[["BFS.Time..ms."]]
cat("\n=== Estadistiques descriptives ===\n")
print(summary(data[c("Nodes", "Edges", "Density", "BFS.Time..ms.", "DFS.Time.ms.", "Diff")]))
faster_bfs <- mean(data[["BFS Time (ms)"]] < data[["DFS Time (ms)"]], na.rm = TRUE) * 100
cat(sprintf("\nPercentatge de casos on BFS es mes rapid: %.1f%%\n", faster_bfs))
cat("\n=== Comprovacio de la densitat ===\n")
data$Density_check <- data[["Edges"]] / (data[["Nodes"]] * (data[["Nodes"]] - 1))
cor_density <- cor(data[["Density"]], data$Density_check, use = "complete.obs")
cat(sprintf("Correlacio entre densitat del CSV i densitat recalculada: %.6f\n", cor_density))
png(filename = "density_check.png", width = 800, height = 600)
plot(data[["Density"]], data$Density_check,
main = "Comprovacio de la densitat",
xlab = "Densitat (al CSV)",
ylab = "Densitat recalculada",
col = "blue", pch = 19)
abline(0, 1, col = "red", lwd = 2, lty = 2)
dev.off()
cat("S'ha guardat 'density_check.png' amb el graf de comparacio.\n")
cat("Comprovant fitxer test_report.csv al directori de treball...\n")
cat("Directori actual: ", getwd(), "\n")
files <- list.files()
cat("Fitxers al directori:\n")
print(files)
if (!file.exists("test_report.csv")) {
stop("ERROR: no s'ha trobat 'test_report.csv' al directori de treball. Copia el CSV al directori que mostra 'getwd()' o canvia el working directory.")
}
data <- read.csv("test_report.csv", check.names = FALSE, stringsAsFactors = FALSE)
cat("Fitxer carregat. Nombre de registres:", nrow(data), "\n\n")
cat("Columnes detectades:\n")
print(colnames(data))
cat("\nMostra de les primeres files:\n")
print(head(data, n = 6))
# Creacio de la columna Diff amb els noms de columnes reals
data$Diff <- data[["DFS Time (ms)"]] - data[["BFS Time (ms)"]]
# Creacio de la columna Diff amb els noms de columnes reals
data$Diff <- data[["DFS Time (ms)"]] - data[["BFS Time (ms)"]]
cat("\n=== Estadistiques descriptives ===\n")
print(summary(data[c("Nodes", "Edges", "Density", "BFS Time (ms)", "DFS Time (ms)", "Diff")]))
# Percentatge de casos on BFS es mes rapid
faster_bfs <- mean(data[["BFS Time (ms)"]] < data[["DFS Time (ms)"]], na.rm = TRUE) * 100
cat(sprintf("\nPercentatge de casos on BFS es mes rapid: %.1f%%\n", faster_bfs))
cat("\n=== Comprovacio de la densitat ===\n")
data$Density_check <- data[["Edges"]] / (data[["Nodes"]] * (data[["Nodes"]] - 1))
cor_density <- cor(data[["Density"]], data$Density_check, use = "complete.obs")
cat(sprintf("Correlacio entre densitat del CSV i densitat recalculada: %.6f\n", cor_density))
png(filename = "density_check.png", width = 800, height = 600)
plot(data[["Density"]], data$Density_check,
main = "Comprovacio de la densitat",
xlab = "Densitat (al CSV)",
ylab = "Densitat recalculada",
col = "blue", pch = 19)
abline(0, 1, col = "red", lwd = 2, lty = 2)
dev.off()
cat("S'ha guardat 'density_check.png' amb el graf de comparacio.\n")
png(filename = "hist_times.png", width = 1000, height = 400)
par(mfrow = c(1,2))
hist(data[["BFS Time (ms)"]], main = "Distribucio del temps BFS",
xlab = "Temps BFS (ms)", col = "skyblue", border = "black")
hist(data[["DFS Time (ms)"]], main = "Distribucio del temps DFS",
xlab = "Temps DFS (ms)", col = "salmon", border = "black")
par(mfrow = c(1,1))
dev.off()
cat("S'ha guardat 'hist_times.png' amb les histogrames BFS i DFS.\n")
png(filename = "bfs_vs_dfs_by_density.png", width = 800, height = 600)
plot(data[["Density"]], data[["BFS Time (ms)"]],
col = "blue", pch = 19,
xlab = "Densitat del graf",
ylab = "Temps d'execucio (ms)",
main = "Comparacio BFS vs DFS segons densitat")
points(data[["Density"]], data[["DFS Time (ms)"]], col = "red", pch = 19)
legend("topleft", legend = c("BFS", "DFS"), col = c("blue", "red"), pch = 19)
dev.off()
cat("S'ha guardat 'bfs_vs_dfs_by_density.png'.\n")
png(filename = "diff_hist.png", width = 800, height = 600)
hist(data$Diff, main = "Diferencia de temps (DFS - BFS)",
xlab = "Diferencia (ms)", col = "lightgreen", border = "black")
dev.off()
cat("S'ha guardat 'diff_hist.png'.\n")
png(filename = "nodes_vs_diff.png", width = 800, height = 600)
plot(data[["Nodes"]], data$Diff, col = "purple", pch = 19,
main = "Relacio Nodes vs Diferencia (DFS - BFS)",
xlab = "Nombre de nodes", ylab = "Diferencia de temps (ms)")
lin <- lm(Diff ~ Nodes, data = data)
abline(lin, col = "black", lwd = 2)
dev.off()
cat("S'ha guardat 'nodes_vs_diff.png'.\n")
cat("\n=== Matriu de correlacions ===\n")
corr_matrix <- cor(data[c("Nodes", "Edges", "Density", "BFS Time (ms)", "DFS Time (ms)", "Diff")], use = "complete.obs")
print(round(corr_matrix, 4))
cat("\n=== Test t parellat (BFS vs DFS) ===\n")
t_res <- t.test(data[["DFS Time (ms)"]], data[["BFS Time (ms)"]], paired = TRUE)
print(t_res)
if (!is.na(t_res$p.value) && t_res$p.value < 0.05) {
cat("Conclusio: Diferencia estadisticament significativa (p < 0.05)\n")
} else {
cat("Conclusio: No hi ha diferencia significativa (p >= 0.05) o no hi ha prou dades)\n")
}
cat("\n=== Model lineal: Diff ~ Nodes + Density ===\n")
model <- lm(Diff ~ Nodes + Density, data = data)
print(summary(model))
cat("Comprovant fitxer test_report.csv...\n")
if (!file.exists("test_report.csv")) {
stop("ERROR: No s'ha trobat 'test_report.csv' al directori de treball. Usa getwd() per comprovar-ho.")
}
# Mantenim els noms del CSV per evitar problemes amb espais
data <- read.csv("test_report.csv",  check.names = FALSE, stringsAsFactors = FALSE)
cat("Fitxer carregat correctament. Nombre de registres:", nrow(data), "\n\n")
cat("Columnes detectades:\n")
print(colnames(data))
# Crear columna de diferència de temps (DFS - BFS)
data <- data %>%
mutate(Diff = `DFS Time (ms)` - `BFS Time (ms)`)
cat("\n=== Estadístiques descriptives ===\n")
print(summary(select(data, Nodes, Edges, Density, `BFS Time (ms)`, `DFS Time (ms)`, Diff)))
cat("\n=== Comprovació de la densitat ===\n")
data <- data %>%
mutate(Density_check = Edges / (Nodes * (Nodes - 1)))
library(ggplot2)
library(dplyr)
install_if_missing <- function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
message(sprintf("Instal·lant el paquet '%s'...", pkg))
install.packages(pkg, dependencies = TRUE)
}
}
for (p in c("ggplot2", "dplyr")) install_if_missing(p)
install_if_missing <- function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
message(sprintf("Instal·lant el paquet '%s'...", pkg))
install.packages(pkg, dependencies = TRUE)
}
}
for (p in c("ggplot2", "dplyr")) install_if_missing(p)
for (p in c("ggplot2", "dplyr")) install_if_missing(p)
for (p in c("ggplot2", "dplyr")) install_if_missing(p)
#
#  Sortides:
#    - Estadístiques descriptives
#    - Test de comparació parellat (t-test)
#    - Models de regressió
#    - Gràfics comparatius i correlacionals
###############################################################
# ------------------------------------------------------------
# Instal·lació automàtica de llibreries
# ------------------------------------------------------------
install_if_missing <- function(pkg) {
if (!requireNamespace(pkg, quietly = TRUE)) {
message(sprintf("Instal·lant el paquet '%s'...", pkg))
install.packages(pkg, dependencies = TRUE)
}
}
for (p in c("ggplot2", "dplyr")) install_if_missing(p)
library(ggplot2)
library(dplyr)
# ------------------------------------------------------------
# Llegir i preparar les dades
# ------------------------------------------------------------
cat("Comprovant fitxer test_report.csv...\n")
if (!file.exists("test_report.csv")) {
stop("ERROR: No s'ha trobat 'test_report.csv' al directori de treball. Usa getwd() per comprovar-ho.")
}
# Mantenim els noms del CSV per evitar problemes amb espais
data <- read.csv("test_report.csv",  check.names = FALSE, stringsAsFactors = FALSE)
cat("Fitxer carregat correctament. Nombre de registres:", nrow(data), "\n\n")
cat("Columnes detectades:\n")
print(colnames(data))
# Crear columna de diferència de temps (DFS - BFS)
data <- data %>%
mutate(Diff = `DFS Time (ms)` - `BFS Time (ms)`)
# ------------------------------------------------------------
# Estadístiques descriptives
# ------------------------------------------------------------
cat("\n=== Estadístiques descriptives ===\n")
print(summary(select(data, Nodes, Edges, Density, `BFS Time (ms)`, `DFS Time (ms)`, Diff)))
# Percentatge de casos on BFS és més ràpid
faster_bfs <- mean(data$`BFS Time (ms)` < data$`DFS Time (ms)`, na.rm = TRUE) * 100
cat(sprintf("\nPercentatge de casos on BFS és més ràpid: %.1f%%\n", faster_bfs))
# ------------------------------------------------------------
# Comprovació de la densitat
# ------------------------------------------------------------
cat("\n=== Comprovació de la densitat ===\n")
data <- data %>%
mutate(Density_check = Edges / (Nodes * (Nodes - 1)))
cor_density <- cor(data$Density, data$Density_check, use = "complete.obs")
cat(sprintf("Correlació entre densitat del CSV i densitat recalculada: %.6f\n", cor_density))
ggplot(data, aes(x = Density, y = Density_check)) +
geom_point(color = "darkblue") +
geom_abline(intercept = 0, slope = 1, color = "red", linetype = "dashed") +
labs(
title = "Comprovació de la densitat",
x = "Densitat (al CSV)",
y = "Densitat recalculada"
) +
theme_minimal()
# ------------------------------------------------------------
# Distribució dels temps BFS i DFS
# ------------------------------------------------------------
ggplot(data, aes(x = `BFS Time (ms)`)) +
geom_histogram(fill = "skyblue", color = "black", bins = 20) +
labs(title = "Distribució del temps BFS", x = "Temps BFS (ms)", y = "Freqüència") +
theme_minimal()
ggplot(data, aes(x = `DFS Time (ms)`)) +
geom_histogram(fill = "salmon", color = "black", bins = 20) +
labs(title = "Distribució del temps DFS", x = "Temps DFS (ms)", y = "Freqüència") +
theme_minimal()
# ------------------------------------------------------------
# Comparació BFS vs DFS segons la densitat
# ------------------------------------------------------------
ggplot(data, aes(x = Density)) +
geom_point(aes(y = `BFS Time (ms)`, color = "BFS")) +
geom_point(aes(y = `DFS Time (ms)`, color = "DFS")) +
labs(
title = "Comparació BFS vs DFS segons la densitat",
x = "Densitat del graf",
y = "Temps d'execució (ms)",
color = "Algorisme"
) +
theme_minimal()
# ------------------------------------------------------------
# Diferència de temps
# ------------------------------------------------------------
ggplot(data, aes(x = Diff)) +
geom_histogram(fill = "lightgreen", color = "black", bins = 20) +
labs(
title = "Distribució de la diferència de temps (DFS - BFS)",
x = "Diferència (ms)",
y = "Freqüència"
) +
theme_minimal()
# ------------------------------------------------------------
# Relació entre nombre de nodes i diferència
# ------------------------------------------------------------
ggplot(data, aes(x = Nodes, y = Diff)) +
geom_point(color = "purple") +
geom_smooth(method = "lm", se = FALSE, color = "black") +
labs(
title = "Relació entre nombre de nodes i diferència (DFS - BFS)",
x = "Nombre de nodes",
y = "Diferència de temps (ms)"
) +
theme_minimal()
# ------------------------------------------------------------
# Correlacions
# ------------------------------------------------------------
cat("\n=== Matriu de correlacions ===\n")
corr_matrix <- cor(select(data, Nodes, Edges, Density, `BFS Time (ms)`, `DFS Time (ms)`, Diff), use = "complete.obs")
print(round(corr_matrix, 4))
# ------------------------------------------------------------
# Test t parellat BFS vs DFS
# ------------------------------------------------------------
cat("\n=== Test t parellat BFS vs DFS ===\n")
test_result <- t.test(data$`DFS Time (ms)`, data$`BFS Time (ms)`, paired = TRUE)
print(test_result)
if (!is.na(test_result$p.value) && test_result$p.value < 0.05) {
cat("Conclusió: Diferència estadísticament significativa (p < 0.05)\n")
} else {
cat("Conclusió: No hi ha diferència significativa (p >= 0.05)\n")
}
# ------------------------------------------------------------
# Model lineal simple
# ------------------------------------------------------------
cat("\n=== Model lineal: Diff ~ Nodes + Density ===\n")
model <- lm(Diff ~ Nodes + Density, data = data)
print(summary(model))
cat("\nAnàlisi completada correctament\n")
###############################################################
###############################################################
# Fi de l'script
###############################################################
# Fi de l'script
###############################################################
###############################################################
# Fi de l'script
###############################################################
###############################################################
# Fi de l'script
###############################################################
